(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{31:function(e,t,a){e.exports=a(59)},36:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(28),i=a.n(l),s=(a(36),a(37),a(14)),c=a(6),o=a(7),u=a(9),m=a(8),h=a(12),d=a.n(h),p=function(e){return d.a.post("/api/rent",{id:Number.parseInt(e)})},b=a(61),v=a(60),f=a(30),g=a(11),k=a.n(g),E=a(13),y=a(62),N=a(63),j=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={category:null,categoryItems:[],currentBike:{id:0,title:"",price:0}},n}return Object(o.a)(a,[{key:"handleCategory",value:function(e){this.setCategory(e.target.value)}},{key:"componentDidUpdate",value:function(e){var t=this,a=Object(s.a)(new Set(this.props.items.map((function(e){return e.category}))));a.some((function(e){return t.state.category==e}))&&e.items.length==this.props.items.length||this.setCategory(a[0])}},{key:"rentBikeAndUpdate",value:function(){var e=this;p(this.state.currentBike.id).then(function(){var t=Object(E.a)(k.a.mark((function t(a){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:200==a.status?e.props.updateAll():console.error(a);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}},{key:"setCategory",value:function(e){var t=this;this.setState({category:e},(function(){t.setCatgItems()}))}},{key:"handleCurrentBike",value:function(e){this.setCurrentBike(e.target.value)}},{key:"setCatgItems",value:function(){var e=this,t=this.props.items.filter((function(t){return e.state.category==t.category}));this.setState({categoryItems:t},(function(){e.setState({currentBike:e.state.categoryItems[0]})}))}},{key:"setCurrentBike",value:function(e){var t=this.state.categoryItems.filter((function(t){return t.id==e}))[0];this.setState({currentBike:t})}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{className:"rent-wrap"},r.a.createElement(f.a,{md:4},r.a.createElement(y.a.Group,{controlId:"exampleForm.ControlSelect1"},r.a.createElement(y.a.Label,{className:"rent-label"},"Bike name"),r.a.createElement(y.a.Control,{as:"select",value:this.state.currentBike.id,defaultValue:this.state.currentBike.id,onChange:this.handleCurrentBike.bind(this)},this.props.items.filter((function(t){return e.state.category==t.category})).map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.title)}))))),r.a.createElement(f.a,{md:4},r.a.createElement(y.a.Group,{controlId:"exampleForm.ControlSelect1"},r.a.createElement(y.a.Label,{className:"rent-label"},"Bike type"),r.a.createElement(y.a.Control,{as:"select",defaultValue:this.state.category,value:this.state.category,onChange:this.handleCategory.bind(this)},Object(s.a)(new Set(this.props.items.map((function(e){return e.category})))).map((function(t,a){return 1!=a||e.state.category||e.setCategory(t),r.a.createElement("option",{key:a,value:t},t)}))))),r.a.createElement(f.a,{md:4},r.a.createElement(v.a,null,r.a.createElement(f.a,{md:6},r.a.createElement(y.a.Group,{controlId:"exampleForm.ControlInput1"},r.a.createElement(y.a.Label,{className:"rent-label"},"Rent Price per hour"),r.a.createElement(y.a.Control,{type:"text",defaultValue:0,value:this.state.currentBike.price}))),r.a.createElement(f.a,{md:6},r.a.createElement("div",{className:"rent-label"}),r.a.createElement(N.a,{className:"rent-button",onClick:this.rentBikeAndUpdate.bind(this)},"Submit Rent")))))}}]),a}(r.a.Component),w=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"rentBikeAndUpdate",value:function(e){var t=this;p(e).then(function(){var e=Object(E.a)(k.a.mark((function e(a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200==a.status?t.props.updateAll():console.error(a);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e)}))}},{key:"deleteBike",value:function(e){var t=this;(function(e){return d.a.patch("/api/bikes",{id:e})})(Number.parseInt(e)).then(function(){var a=Object(E.a)(k.a.mark((function a(n){return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:200==n.status?t.props.updateAftDelete(e):console.error(n);case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){console.error(e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,null,this.props.items.map((function(t,a){return r.a.createElement(f.a,{md:12,className:"list-item",key:a},r.a.createElement(v.a,{className:"justify-content-between aw-forward-info"},r.a.createElement(f.a,{md:6,className:"m-t-8"},t.title," / ",t.category," / $",t.price,"/h"),r.a.createElement(f.a,{md:6,className:"item-button-group"},r.a.createElement(N.a,{variant:"primary",className:"rent-btn aw-btn",onClick:function(){return e.rentBikeAndUpdate(t.id)}},"Rent")," ",r.a.createElement(N.a,{variant:"danger",className:"delete-btn aw-btn",onClick:function(){return e.deleteBike(t.id)}},"Delete")," ")))})))}}]),a}(r.a.Component),C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"handleDeleteButton",value:function(e){this.props.delFunc(e.target.getAttribute("data-value"))}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,null,this.props.items.map((function(t,a){return r.a.createElement(f.a,{md:12,className:"list-item",key:a},r.a.createElement(v.a,{className:"justify-content-between aw-forward-info"},r.a.createElement(f.a,{md:6,className:"m-t-8"},t.title," / ",t.category," / Time in Rent: ",t.diff,"h / $",t.price),r.a.createElement(f.a,{md:6,className:"item-button-group"},r.a.createElement(N.a,{variant:"danger",className:"delete-btn aw-btn","data-value":t.bikesToRents_id,onClick:e.handleDeleteButton.bind(e)},"Cancel Rent")," ")))})))}}]),a}(r.a.Component),O=a(10),I=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={categoryId:0,bikeName:"",price:0,errorName:!1,errorPrice:!1,success:!1},n}return Object(o.a)(a,[{key:"createBikeF",value:function(){this.state.price<=0||this.state.bikeName.length<4?(this.state.price<=0&&this.setState({errorPrice:!0}),this.state.bikeName.length<=4&&this.setState({errorName:!0})):this.postNewBike()}},{key:"postNewBike",value:function(){var e,t=this;(e={title:this.state.bikeName,price:this.state.price,category_id:this.state.categoryId},d.a.post("/api/bikes",e)).then((function(e){200==e.status?(t.props.update(e.data),t.setState({success:!0})):console.error(e)})).catch((function(e){return console.error(e)}))}},{key:"handleCategory",value:function(e){this.setState({categoryId:Number.parseFloat(e.target.value)})}},{key:"handleName",value:function(e){var t;this.setState((t={},Object(O.a)(t,e.target.name,e.target.value),Object(O.a)(t,"errorName",!1),Object(O.a)(t,"errorPrice",!1),Object(O.a)(t,"success",!1),t))}},{key:"handlePrice",value:function(e){var t;Number.parseInt(e.target.value)>=0&&this.setState((t={},Object(O.a)(t,e.target.name,Number.parseInt(e.target.value)),Object(O.a)(t,"errorPrice",!1),Object(O.a)(t,"errorName",!1),Object(O.a)(t,"success",!1),t))}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{className:"rent-wrap"},r.a.createElement(f.a,{md:4},r.a.createElement(y.a.Group,{controlId:"qweqweweq"},r.a.createElement(y.a.Label,{className:"rent-label"},"Bike name"),r.a.createElement(y.a.Control,{type:"text",onChange:this.handleName.bind(this),value:this.state.name,name:"bikeName"}),this.state.errorName?r.a.createElement("small",{className:"err-field"},"The name field must be greater than 4 characters"):null,this.state.success?r.a.createElement("small",{className:"success-field"},"Success"):null)),r.a.createElement(f.a,{md:4},r.a.createElement(y.a.Group,{controlId:"eqweqe"},r.a.createElement(y.a.Label,{className:"rent-label"},"Category"),r.a.createElement(y.a.Control,{as:"select",value:this.state.categoryId,onChange:this.handleCategory.bind(this)},this.props.categories.map((function(t,a){return 1==a&&0===e.state.categoryId&&e.setState({categoryId:t.id}),r.a.createElement("option",{key:t.id,value:t.id},t.title)}))))),r.a.createElement(f.a,{md:4},r.a.createElement(v.a,null,r.a.createElement(f.a,{md:6},r.a.createElement(y.a.Group,{controlId:"qweqweweq"},r.a.createElement(y.a.Label,{className:"rent-label"},"Bike price per hour"),r.a.createElement(y.a.Control,{type:"number",value:this.state.price,name:"price",onChange:this.handlePrice.bind(this)}),this.state.errorPrice?r.a.createElement("small",{className:"err-field"},"The price field must be greater than 0 characters"):null)),r.a.createElement(f.a,{md:6},r.a.createElement("div",{className:"rent-label"}),r.a.createElement(N.a,{className:"rent-button",onClick:this.createBikeF.bind(this)},"Add")))))}}]),a}(r.a.Component),B=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={available:[],sum:0,rentItems:[],categories:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;d.a.get("/api/bikes/categories").then((function(t){200===t.status?e.setState({categories:t.data}):console.log(t),e.updateData()})).catch((function(e){return console.log({error:e})}))}},{key:"updateData",value:function(){this.getAvailable(),this.getRent()}},{key:"insertNewAvailableItem",value:function(e){this.setState({available:[].concat(Object(s.a)(this.state.available),[e])})}},{key:"deleteAvailableItem",value:function(e){var t=this.state.available.filter((function(t){return t.id!=e}));this.setState({available:t})}},{key:"getAvailable",value:function(){var e=this;d.a.get("/api/bikes/available").then((function(t){e.setState({available:t.data})})).catch((function(e){return console.log({error:e})}))}},{key:"getRent",value:function(){var e=this;d.a.get("/api/rent").then((function(t){200==t.status?e.setState({sum:t.data.sum,rentItems:t.data.items}):console.log(t)})).catch((function(e){return console.log({error:e})}))}},{key:"deleteRent",value:function(e){var t=this;(function(e){return d.a.delete("/api/rent",{data:{id:Number.parseInt(e)}})})(e).then((function(e){200==e.status?t.updateData():console.error(e)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement(v.a,null,r.a.createElement("h1",{className:"m-t-70"},"Awesome Bike Rental"),r.a.createElement(f.a,{md:12}),this.state.available.length>0?r.a.createElement("div",{className:"title-container"},r.a.createElement("span",{role:"img","aria-label":"emoji1",className:"emoji"},"\ud83c\udfcd"),r.a.createElement("h3",{className:"block-title "},"Create new rent ")," "):null,this.state.available.length>0?r.a.createElement(f.a,{md:12},r.a.createElement(j,{items:this.state.available,updateAll:this.updateData.bind(this)})):null,r.a.createElement("div",{className:"title-container"},r.a.createElement("span",{role:"img","aria-label":"emoji1",className:"emoji"},"\u2692"),r.a.createElement("h3",{className:"block-title "},"Add new Bike")," "),this.state.categories.length>0?r.a.createElement(f.a,{md:12},r.a.createElement(I,{categories:this.state.categories,update:this.insertNewAvailableItem.bind(this)})," "):null,r.a.createElement("div",{className:"title-container"},r.a.createElement("span",{role:"img","aria-label":"emoji1",className:"emoji"},"\ud83d\udd11"),r.a.createElement("h3",{className:"block-title"},"Rent Bikes (Total: $",this.state.sum," )")),r.a.createElement(f.a,{md:12},this.state.rentItems.length>0?r.a.createElement("div",null,r.a.createElement(C,{items:this.state.rentItems,delFunc:this.deleteRent.bind(this)})):r.a.createElement(f.a,{md:12,className:"empty-list"},r.a.createElement("p",null,"Rent dont have items"))),r.a.createElement("div",{className:"title-container"},r.a.createElement("span",{role:"img","aria-label":"emoji1",className:"emoji"},"\ud83d\udeb2"),r.a.createElement("h3",{className:"block-title"},"Available bicycles (",this.state.available.length,")")),r.a.createElement(f.a,{md:12},this.state.available.length>0?r.a.createElement(w,{items:this.state.available,updateAll:this.updateData.bind(this),updateAftDelete:this.deleteAvailableItem.bind(this)}):r.a.createElement(f.a,{md:12,className:"empty-list"},r.a.createElement("p",null,"No bikes available")))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.fc5d1ca6.chunk.js.map